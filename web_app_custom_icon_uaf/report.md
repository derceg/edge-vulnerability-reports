# Summary

When installing a site as an app, a custom icon can be chosen. If the web app installation dialog is closed while the file selection dialog is being shown (e.g. because the tab is navigated elsewhere or closed), a use after free will occur if the user selects an image file.

# Description

The WebAppConfirmationView class creates an instance of the EdgeWebAppCustomIcon class during construction. That instance will then be destroyed when the WebAppConfirmationView object is destroyed.

When the tab showing the web app install dialog is navigated to another location, the WebAppConfirmationView object will be destroyed, along with the EdgeWebAppCustomIcon object. If the user then selects a file from the open file dialog, a use after free will occur as EdgeWebAppCustomIcon::OnEditIconButtonPressed will attempt to access members of the class.

No errors will occur if the user simply closes the file selection dialog, as EdgeWebAppCustomIcon::OnEditIconButtonPressed will return without doing anything further in that case.

## Steps to Reproduce

1. Install the attached extension.
2. Once installed, the extension will open https://www.bing.com/ in a new tab.
3. From the app menu, select Apps > Install this site as an app.
4. Click the edit link in the web app install dialog.
5. Twenty seconds after opening the tab in step 2, the extension will navigate it to about:blank. Once this has occurred, select an image from the open file dialog. This should result in the UAF described above.