# Summary

In the stable version of Edge, extension icons can be added to the app menu. If one of those icons is being dragged and the window is closed, a use-after-free will occur when one of the extension icons is updated (e.g. because the badge text has been updated).

# Description

This issue appears to have originated in Chromium, however it's not possible to add extension icons to the app menu in Chrome anymore and the relevant code has been removed (see https://crbug.com/1165609). The code is still active, however, in the stable version of Edge.

Going through the steps below in an older asan build of Chromium shows a use-after-free, presumably the same use-after-free that shows up in Edge.

Since it's not possible to add extension icons to the app menu from Edge beta onwards, this specific issue may be implicitly fixed and not require any work.

## Steps to Reproduce

1. Ensure that at least one extension icon is shown at the top of the app menu.
2. Install the attached extension.
3. Once installed, the extension will create a new window. Open the app menu in that window, then start dragging one of the extension icons contained within the menu.
4. Five seconds after creating the window, the extension will close it.
5. The extension will then update the badge text for its icon. This will trigger a use-after-free in the browser process.