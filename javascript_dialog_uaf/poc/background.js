startProcess();

function startProcess() {
    chrome.windows.create({url: "javascript:alert()"}, function (newWindow) {
        // Wait a bit for the dialog to be shown.
        setTimeout(() => {
            onTabCreated(newWindow.tabs[0]);
        }, 1000);
    });
}

function onTabCreated(tab) {
    chrome.windows.create({tabId: tab.id}, function () {
        // Since the original window only had a single tab, moving that tab to a new window will
        // result in the original window being closed.
        // Because windows are closed asynchronously (first, the tabs are removed and then the
        // window itself is destroyed a short time later), there's a timeout here to give the window
        // a chance to fully close.
        setTimeout(() => {
            chrome.tabs.update(tab.id, {url: "about:blank"});
        }, 1000);
    });
}